<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>trak.js - tech.tmw.co.uk</title>
		<meta name="description" content="tech.tmw.co.uk - where TMW talks Tech">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="/css/kickoff.css">
		<script>var pageName = 'code';</script>

		<script>
			/* grunticon Stylesheet Loader | https://github.com/filamentgroup/grunticon | (c) 2012 Scott Jehl, Filament Group, Inc. | MIT license. */
			window.grunticon=function(e){if(e&&3===e.length){var t=window,n=!(!t.document.createElementNS||!t.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||window.opera&&-1===navigator.userAgent.indexOf("Chrome")),o=function(o){var r=t.document.createElement("link"),a=t.document.getElementsByTagName("script")[0];r.rel="stylesheet",r.href=e[o&&n?0:o?1:2],a.parentNode.insertBefore(r,a)},r=new t.Image;r.onerror=function(){o(!1)},r.onload=function(){o(1===r.width&&1===r.height)},r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}};
			grunticon(["/img/icons/icons.data.svg.css", "/img/icons/icons.data.png.css", "/img/icons/icons.fallback.css"]);
		</script>
		<noscript><link href="/img/icons/icons.fallback.css" rel="stylesheet"></noscript>

		<!-- Mobile & Fav Icons -->
		<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
		<link rel="apple-touch-icon" href="/img/favicons/apple-touch-icon.png" />
		<link rel="apple-touch-icon" sizes="57x57" href="/img/favicons/apple-touch-icon-57x57.png" />
		<link rel="apple-touch-icon" sizes="72x72" href="/img/favicons/apple-touch-icon-72x72.png" />
		<link rel="apple-touch-icon" sizes="76x76" href="/img/favicons/apple-touch-icon-76x76.png" />
		<link rel="apple-touch-icon" sizes="114x114" href="/img/favicons/apple-touch-icon-114x114.png" />
		<link rel="apple-touch-icon" sizes="120x120" href="/img/favicons/apple-touch-icon-120x120.png" />
		<link rel="apple-touch-icon" sizes="144x144" href="/img/favicons/apple-touch-icon-144x144.png" />
		<link rel="apple-touch-icon" sizes="152x152" href="/img/favicons/apple-touch-icon-152x152.png" />

		<meta name="apple-mobile-web-app-title" content="tech.tmw">

		<meta property="og:image" content="http://tech.tmw.co.uk/img/favicons/apple-touch-icon-152x152.png"/>

		<!-- Twitter - https://dev.twitter.com/cards/overview -->
		<meta name="twitter:site" content="@tmwTechTeam">
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:title" content="trak.js" />
		<meta name="twitter:image" content="http://tech.tmw.co.uk/img/favicons/apple-touch-icon-152x152.png" />
		<meta name="twitter:url" content="http://tech.tmw.co.uk/code/trak/" />


		<!-- Open Graph data -->
		<meta property="og:title" content="trak.js" />
		<meta property="og:type" content="article" />
		<meta property="og:url" content="http://tech.tmw.co.uk/code/trak/" />
		<meta property="og:image" content="http://tech.tmw.co.uk/img/favicons/apple-touch-icon-152x152.png" />

		<link rel="alternate" type="application/atom+xml" title="tech.tmw Feed" href="http://feeds.feedburner.com/TMWLabs" />
	</head>
	<body class="clearfix">

<div class="sidebar">
	<header class="masthead">
	<h1 class="logo"><a href="/"><span class="tmwBrand">TMW</span>tech...</a></h1>
	<p class="logo-tagline">Latest news and opinion from the <a href="http://www.tmwunlimited.com" title="TMWUnlimited&hellip;'s website" target="_blank" class="tmwBrand">TMW<span>Unlimited&hellip;</span></a> tech team</p>

	<nav class="nav">
		<a href="/" class="nav-item">Articles</a>
		<a href="/code" class="nav-item is-active">Code</a>
		<a href="/team" class="nav-item">Team</a>
		<a href="/work" class="nav-item">Work</a>
		
			<a href="/join-us" class="nav-item">Join us</a>
		
	</nav>
</header>


</div>

<div class="content">
	<article class="content-inner entry entry--single" role="main">
	<h1 class="sectionTitle">code</h1>

	


	<div class="entry-content">
		
		<h1 class="entry-title entry-title--single">trak.js</h1>
		

	<div class="links">
		
			<a href="https://github.com/mrmartineau/trak.js" class="links-item">View the Repo on Github</a>
		
		
		
			<a href="demo.html" class="links-item">Demo</a>
		
		
			<a href="https://github.com/mrmartineau/trak.js/issues" class="links-item">Issues</a>
		
		
		
		
	</div>

		<p>Put simply, <strong>trak.js</strong> is a wrapper for any analytics API. By default it uses Google Universal Analytics but you can override this with the older ga.js or Google Tag Manager if you wish, or you can even add custom event trackers as well, instead of Google Analytics.</p>

<h2 id="getting-the-library">Getting the Library</h2>
<p>### Direct downloads
- <a href="https://raw.githubusercontent.com/mrmartineau/trak.js/master/dist/trak.min.js">Minified</a> (~481 B gzipped)
- <a href="https://raw.githubusercontent.com/mrmartineau/trak.js/master/dist/trak.js">Unminified</a> (~1.7 KB gzipped)</p>

<h3 id="bower">Bower</h3>
<p><code class="highlighter-rouge">bower install trak</code></p>

<h3 id="npm">NPM</h3>
<p><code class="highlighter-rouge">npm install trak.js --save</code></p>

<h2 id="usage">Usage</h2>
<p>Include <strong>trak.js</strong> in your JavaScript bundle or add it to your HTML page like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">'application/javascript'</span> <span class="na">src=</span><span class="s">'/path/to/trak.js'</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
</div>

<p>then run <code class="highlighter-rouge">trak.start();</code> when the DOM is ready (after version 0.3.0 this has changed, run <code class="highlighter-rouge">trak();</code> before version 0.3.0):</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Native JS</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'DOMContentLoaded'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">trak</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// jQuery</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="nx">trak</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
<span class="p">});</span>
</code></pre>
</div>

<h1 id="api-reference">API Reference</h1>
<p>There are two main ways to use <strong>trak.js</strong>, in your js code or as <code class="highlighter-rouge">data-trak</code> attributes in your markup.</p>

<h2 id="js-implementation">JS implementation:</h2>
<p>### trak.event({category: ‘’, action: ‘’, label: ‘’ , value: ‘’, nonInteraction: ‘’, eventName: ‘’})</p>

<p>Fires an analytics event</p>

<h4 id="arguments-object-these-are-all-optional">Arguments object: (these are all optional)</h4>
<p><em>category</em>: A string value of the category value to set<br />
<em>action</em>: A string value of the action value to set<br />
<em>label</em>: A string value of the label value to set<br />
<em>value</em>: An integer<br />
<strong>trigger</strong>: A string value of a valid event name: <code class="highlighter-rouge">click</code>, <code class="highlighter-rouge">focus</code>, <code class="highlighter-rouge">mouseover</code> etc<br />
<strong>nonInteraction</strong>: An integer<br />
<strong>eventName</strong>: A string value used only with Google Tag Manager. Define your GTM event name here</p>

<p>If any property is left <code class="highlighter-rouge">undefined</code>, the browser’s default value will be used instead.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">trak</span><span class="p">.</span><span class="nx">event</span><span class="p">({</span><span class="na">category</span><span class="p">:</span> <span class="s1">'category value'</span><span class="p">,</span> <span class="na">action</span><span class="p">:</span> <span class="s1">'action value'</span><span class="p">});</span>
<span class="nx">trak</span><span class="p">.</span><span class="nx">event</span><span class="p">({</span><span class="na">category</span><span class="p">:</span> <span class="s1">'category value'</span><span class="p">,</span> <span class="na">action</span><span class="p">:</span> <span class="s1">'action value'</span><span class="p">,</span> <span class="na">label</span><span class="p">:</span> <span class="s1">'label value'</span><span class="p">});</span>
<span class="nx">trak</span><span class="p">.</span><span class="nx">event</span><span class="p">({</span><span class="na">category</span><span class="p">:</span> <span class="s1">'category value'</span><span class="p">,</span> <span class="na">action</span><span class="p">:</span> <span class="s1">'action value'</span><span class="p">,</span> <span class="na">label</span><span class="p">:</span> <span class="s1">'label value'</span> <span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">nonInteraction</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">eventName</span><span class="p">:</span> <span class="s1">''</span><span class="p">});</span>
</code></pre>
</div>
<p>##### Example:
<code class="highlighter-rouge">js
el.addEventListener('click', function() {
  trak.event({category: 'engagement', action: 'signpost', label: 'page.href'});
}
el.addEventListener('mouseover', function() {
  trak.event({
    category: 'engagement',
    action: 'signpost',
    label: 'page.href',
    value: 10,
    nonInteraction: true,
    eventName: 'This is a Google Tag Manager event name'
  });
}
</code></p>

<h3 id="data-trak-attr-implementation">data-trak attr implementation</h3>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;a</span> <span class="na">data-trak=</span><span class="s">'{"category":"Rating","action":"Comparison notepad","label":"Up"}'</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>link<span class="nt">&lt;/a&gt;</span>
</code></pre>
</div>

<h3 id="custom-trigger-type-new-as-of-v040">Custom trigger type (new as of v0.4.0)</h3>
<p><code class="highlighter-rouge">data-trak</code> attrs can also define a custom trigger type instead of <code class="highlighter-rouge">click</code>. Now <code class="highlighter-rouge">mouseover</code>, <code class="highlighter-rouge">touchstart</code>, <code class="highlighter-rouge">focus</code>, <code class="highlighter-rouge">blur</code> or any other valid event can be used to trigger a trak event.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">&lt;!-- Triggered on focus --&gt;</span>
<span class="nt">&lt;a</span> <span class="na">data-trak=</span><span class="s">'{"trigger":"focus","category":"Test category","action":"Test action","label":"Test label"}'</span> <span class="na">href=</span><span class="s">"#pagehref"</span><span class="nt">&gt;</span>Custom trigger type<span class="nt">&lt;/a&gt;</span>
</code></pre>
</div>

<h3 id="wildcards">Wildcards</h3>
<p>Wildcards can be used to specify certain options like the page title or url.</p>

<h5 id="pagehref-uses-windowlocationhref">page.href: Uses <code class="highlighter-rouge">window.location.href</code></h5>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;a</span> <span class="na">data-trak=</span><span class="s">'{"category":"Rating","action":"page.href","label":"Up"}'</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>link<span class="nt">&lt;/a&gt;</span>
</code></pre>
</div>
<p>##### page.title: Uses <code class="highlighter-rouge">document.title</code>
<code class="highlighter-rouge">html
&lt;a data-trak='{"category":"Rating","action":"page.title","label":"Up"}'href="#" &gt;link&lt;/a&gt;
</code>
##### link.href: Uses <code class="highlighter-rouge">this.href</code>
<code class="highlighter-rouge">html
&lt;a data-trak='{"category":"Rating","action":"link.href","label":"Up"}' href="#"&gt;link&lt;/a&gt;
</code>
##### link.title: Uses <code class="highlighter-rouge">this.title</code>
<code class="highlighter-rouge">html
&lt;a data-trak='{"category":"Rating","action":"link.title","label":"Up"}' href="#"&gt;link&lt;/a&gt;
</code>
##### referrer: Uses <code class="highlighter-rouge">document.referrer</code>
<code class="highlighter-rouge">html
&lt;a data-trak='{"category":"Rating","action":"document.referrer","label":"Up"}' href="#"&gt;link&lt;/a&gt;
</code></p>

<h4 id="using-data-trak-attr-options-with-but-fire-event-with-js">Using <code class="highlighter-rouge">data-trak</code> attr options with but fire event with js</h4>
<p>You can also use data-* attr options but fire events in js. To do this, add the relevant <code class="highlighter-rouge">data-trak</code> data and also a <code class="highlighter-rouge">data-trakwithjs</code> boolean attribute. This means that the event will only fire when you run it in your js. To run in your js, use the <code class="highlighter-rouge">trak.attrEvent</code> method like we have below:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;a</span> <span class="na">data-trakwithjs</span> <span class="na">data-trak=</span><span class="s">'{"category":"Tracked with JS not attr call","action":"link.href","label":"this is a label"}'</span> <span class="na">href=</span><span class="s">"#pagehref"</span><span class="nt">&gt;</span>trakwithjs<span class="nt">&lt;/a&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">trak</span><span class="p">.</span><span class="nx">attrEvent</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>
</div>
<p>See this in use in the <a href="http://tech.tmw.co.uk/code/trak/demo.html">trak demo</a>.</p>

<hr />

<h3 id="options">Options</h3>
<p>Various default <strong>trak.js</strong> options can be overridden:</p>

<h4 id="trakoptionsclean">trak.options.clean</h4>
<p>Choose whether you’d like to clean the provided category, action and labels</p>

<p>Type: <code class="highlighter-rouge">boolean</code>
Default: <code class="highlighter-rouge">true</code></p>

<h4 id="trakoptionsdelimeter">trak.options.delimeter</h4>
<p><strong>trak.js</strong> includes a cleaning method to normalise the arguments that are passed to it. Spaces are converted to an underscore by default but can be overridden by reassigning this value.</p>

<p>Type: <code class="highlighter-rouge">string</code>
Default: <code class="highlighter-rouge">_</code></p>

<h4 id="trakoptionstracktype">trak.options.trackType</h4>
<p>Type: <code class="highlighter-rouge">string</code>
Default: <code class="highlighter-rouge">ga</code></p>

<p>Alternatives:
* <code class="highlighter-rouge">ga</code> : Google Analytics (Universal
* <code class="highlighter-rouge">_gaq</code> : Google Analytics (ga.js) Old version
* <code class="highlighter-rouge">gtm</code> : Google Tag Manager</p>

<p>Use this to change your default tracking provider.</p>

<h4 id="trakoptionsadditionaltypes">trak.options.additionalTypes</h4>
<p>Type: <code class="highlighter-rouge">function</code>
Default: <code class="highlighter-rouge">undefined</code></p>

<p>Add any other event tracking providers. See below for example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">trak</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">additionalTypes</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">UDM</span><span class="p">.</span><span class="nx">evq</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s1">'trackEvent'</span><span class="p">,</span> <span class="nx">trak</span><span class="p">.</span><span class="nx">clean</span><span class="p">(</span><span class="nx">category</span><span class="p">),</span> <span class="nx">trak</span><span class="p">.</span><span class="nx">clean</span><span class="p">(</span><span class="nx">action</span><span class="p">)]);</span> <span class="c1">// trak.clean(label)</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Fire additional event'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>

<h4 id="trakoptionsdebug">trak.options.debug</h4>
<p>Type: <code class="highlighter-rouge">boolean</code>
Default: <code class="highlighter-rouge">false</code></p>

<p>Show debug logs in the javascript console</p>

<hr />

<h2 id="which-tracking-apis-are-used">Which tracking API’s are used?</h2>
<p>The default implementation uses latest version of Google Analytics (<code class="highlighter-rouge">ga.js</code>) but <strong>trak.js</strong> also supports the older <code class="highlighter-rouge">_gaq</code> type or Google Tag Manager.</p>

<hr />
<p>## Browser Compatibility
trak.js has been tested in the following browsers:
- Chrome
- Firefox 3+
- Opera 10+
- Internet Explorer 8+</p>

	</div>


	<div class="entry-meta entry-meta--post">
		<div class="entry-date">Maintained by</div>
		<p class="entry-maintainers l-list--floated unstyled">

				
					
					<div class="media entry-author">
			<img src="/img/authors/zmartineau.jpg" alt="Picture of Zander Martineau" class="media-img entry-author-img">
			<div class="media-body">
				<h3 class="entry-author-name"><a href="http://twitter.com/mrmartineau">Zander Martineau</a></h3>
				<p class="entry-author-desc">Zander is a Creative Technologist at TMW. Maintainer of Kickoff and sometimes confused with Harry Potter.</p>
			</div>
		</div>
				
			</p>

	</div>

	

	<!-- 
	  <a href="/2015/11/UX-of-a-front-end-framework/">Improving the UX of a front-end framework</a><br />
	
	  <a href="/2015/01/accessible-cross-reference-tables/">Accessible Cross Reference Tables</a><br />
	
	  <a href="/2015/01/communicating-between-php-and-an-arduino-with-sockets/">Communicating Between PHP and an Arduino with Sockets</a><br />
	
	  <a href="/2015/01/creating-a-web-app-with-grunt-part-2/">Creating a Web-app with Grunt - Part 2</a><br />
	
	  <a href="/2014/11/trakjs-universal-analytics-api/">Improve website event tracking with trak.js</a><br />
	
	  <a href="/2014/10/creating-a-web-app-with-grunt-part-1/">Creating a Web-app with Grunt - Part 1</a><br />
	
	  <a href="/2014/10/Interning-in-the-Tech-Department/">Interning in the Tech department</a><br />
	
	  <a href="/2014/10/kickoff-version-4/">Kickoff Version 4 released</a><br />
	
	  <a href="/2014/10/outsourcing/">Should you outsource development?</a><br />
	
	  <a href="/2014/08/the-road-to-kickoff-version-4/">The road to Kickoff version 4</a><br />
	 -->
</article>

<!-- Pagination links -->
<div class="pagination clearfix">
	<div class="container">
		
			<a href="/code/swiftclick/" class="pagination-item pagination-item--older"><b>Older post</b><br>Swiftclick</a>
		
		
	</div>
</div>
</div>

<footer class="footer" role="contentinfo">
	<div class="socialLinks">
		<a href="http://github.com/tmwagency/" class="socialLinks-item"><span aria-hidden="true" class="icon-small icon-github"></span>@tmwagency</a>
		<a href="http://twitter.com/tmwTechTeam/" class="socialLinks-item"><span aria-hidden="true" class="icon-small icon-twitter"></span>@tmwTechTeam</a>
		<a href="http://tmwagency.github.io/kickoff/" class="socialLinks-item"><span aria-hidden="true" class="icon-small icon-kickoff"></span>We also maintain Kickoff</a>
		<a href="http://eepurl.com/KaKbv" class="socialLinks-item"><span aria-hidden="true" class="icon-small icon-subscribe"></span>Subscribe by Email</a>
	</div>
</footer>


	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-27779119-7', 'tmw.co.uk');
		ga('send', 'pageview');
	</script>
</body>
</html>
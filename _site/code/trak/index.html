<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>trak.js (beta) - tech.tmw.co.uk</title>
		<meta name="description" content="tech.tmw.co.uk - where TMW talks Tech">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="/css/kickoff.css">
		<script type="text/javascript" src="//use.typekit.net/luc1phj.js"></script>
		<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
		<script>var pageName = 'code';</script>

		<script>
			/* grunticon Stylesheet Loader | https://github.com/filamentgroup/grunticon | (c) 2012 Scott Jehl, Filament Group, Inc. | MIT license. */
			window.grunticon=function(e){if(e&&3===e.length){var t=window,n=!(!t.document.createElementNS||!t.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||window.opera&&-1===navigator.userAgent.indexOf("Chrome")),o=function(o){var r=t.document.createElement("link"),a=t.document.getElementsByTagName("script")[0];r.rel="stylesheet",r.href=e[o&&n?0:o?1:2],a.parentNode.insertBefore(r,a)},r=new t.Image;r.onerror=function(){o(!1)},r.onload=function(){o(1===r.width&&1===r.height)},r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}};
			grunticon(["/img/icons/icons.data.svg.css", "/img/icons/icons.data.png.css", "/img/icons/icons.fallback.css"]);
		</script>
		<noscript><link href="/img/icons/icons.fallback.css" rel="stylesheet"></noscript>

		<!-- Mobile & Fav Icons -->
		<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
		<link rel="apple-touch-icon" href="/img/favicons/apple-touch-icon.png" />
		<link rel="apple-touch-icon" sizes="57x57" href="/img/favicons/apple-touch-icon-57x57.png" />
		<link rel="apple-touch-icon" sizes="72x72" href="/img/favicons/apple-touch-icon-72x72.png" />
		<link rel="apple-touch-icon" sizes="76x76" href="/img/favicons/apple-touch-icon-76x76.png" />
		<link rel="apple-touch-icon" sizes="114x114" href="/img/favicons/apple-touch-icon-114x114.png" />
		<link rel="apple-touch-icon" sizes="120x120" href="/img/favicons/apple-touch-icon-120x120.png" />
		<link rel="apple-touch-icon" sizes="144x144" href="/img/favicons/apple-touch-icon-144x144.png" />
		<link rel="apple-touch-icon" sizes="152x152" href="/img/favicons/apple-touch-icon-152x152.png" />

		<meta name="apple-mobile-web-app-title" content="tech.tmw">

		<meta property="og:image" content="http://tech.tmw.co.uk/img/favicons/apple-touch-icon-152x152.png"/>

		<!-- Twitter - https://dev.twitter.com/cards/overview -->
		<meta name="twitter:site" content="@tmwTechTeam">
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:title" content="trak.js (beta)" />
		<meta name="twitter:image" content="http://tech.tmw.co.uk/img/favicons/apple-touch-icon-152x152.png" />
		<meta name="twitter:url" content="http://tech.tmw.co.uk/code/trak/" />


		<!-- Open Graph data -->
		<meta property="og:title" content="trak.js (beta)" />
		<meta property="og:type" content="article" />
		<meta property="og:url" content="http://tech.tmw.co.uk/code/trak/" />
		<meta property="og:image" content="http://tech.tmw.co.uk/img/favicons/apple-touch-icon-152x152.png" />

		<link rel="alternate" type="application/atom+xml" title="tech.tmw Feed" href="http://feeds.feedburner.com/TMWLabs" />
	</head>
	<body>

<div class="sidebar">
	<header class="masthead">
	<h1 class="logo"><a href="/">tech<span class="dot">.</span><span class="tmwBrand">tmw</span></a></h1>
	<p class="logo-tagline">Latest news and opinion from the <a href="http://www.tmw.co.uk" title="TMW's website" target="_blank" class="tmwBrand"><strong>tmw</strong></a> tech team</p>

	<nav class="nav">
		<a href="/" class="nav-item">Articles</a>
		<a href="/code" class="nav-item is-active">Code</a>
		<a href="/team" class="nav-item">Team</a>
		<a href="/work" class="nav-item">Work</a>
	</nav>
</header>


	<footer class="footer" role="contentinfo">
	<div class="socialLinks">
		<a href="http://github.com/tmwagency/" class="socialLinks-item"><span aria-hidden="true" class="icon-small icon-github"></span>@tmwagency</a>
		<a href="http://twitter.com/tmwTechTeam/" class="socialLinks-item"><span aria-hidden="true" class="icon-small icon-twitter"></span>@tmwTechTeam</a>
		<a href="http://tmwagency.github.io/kickoff/" class="socialLinks-item"><span aria-hidden="true" class="icon-small icon-kickoff"></span>We also maintain Kickoff</a>
		<a href="http://eepurl.com/KaKbv" class="socialLinks-item"><span aria-hidden="true" class="icon-small icon-subscribe"></span>Subscribe by Email</a>
	</div>
</footer>

</div>

<div class="content">
	<article class="content-inner entry entry--single" role="main">
	<h1 class="sectionTitle">code</h1>

	


	<div class="entry-content">
		
		<h1 class="entry-title entry-title--single">trak.js (beta)</h1>
		

	<div class="links">
		
			<a href="https://github.com/tmwagency/trak.js" class="links-item">View the Repo on Github</a>
		
		
		
			<a href="demo.html" class="links-item">Demo</a>
		
		
			<a href="https://github.com/tmwagency/trak.js/issues" class="links-item">Issues</a>
		
		
		
		
	</div>

		<p><strong>trak.js</strong> is a API wrapper for your analytics APIs. By default it uses the Google Universal Analytics but you can override this with the older ga.js or Google Tag Manager if you wish. You can even add custom event trackers as well as, or instead of GA.</p>

<h2>Getting the Library</h2>

<h3>Direct downloads</h3>

<ul>
<li><a href="https://raw.githubusercontent.com/tmwagency/trak.js/master/dist/trak.min.js">Minified</a> (~481 B gzipped)</li>
<li><a href="https://raw.githubusercontent.com/tmwagency/trak.js/master/dist/trak.js">Unminified</a> (~1.7 KB gzipped)</li>
</ul>

<h3>Bower</h3>

<p><code>bower install trak</code></p>

<h2>Usage:</h2>

<p>Include <strong>trak.js</strong> in your JavaScript bundle or add it to your HTML page like this:</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">'application/javascript'</span> <span class="na">src=</span><span class="s">'/path/to/trak.js'</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div>
<p>then run <code>trak();</code> when the DOM is ready:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Native JS
</span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'DOMContentLoaded'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">trak</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// jQuery
</span><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">trak</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>
<h1>API Reference</h1>

<p>There are two main ways to use <strong>trak.js</strong>, in your js code or as data-* attributes in your markup.</p>

<h2>JS implementation:</h2>

<h3>trak.event(category, action, label [, options])</h3>

<p>Fires an analytics event</p>

<h4>Arguments:</h4>

<p><em>category</em>: A string value of the category value to set<br>
<em>action</em>: A string value of the action value to set<br>
<em>label</em>: A string value of the label value to set<br>
<em>extendedOptions</em>: An object containing additional parameters for more advanced analytics events.</p>

<h4>The &#39;extendedOptions&#39; Object:</h4>

<p><em>value</em>: An integer<br>
<em>nonInteraction</em>: An integer<br>
<em>eventName</em>: A string value used only with Google Tag Manager. Define your GTM event name here</p>

<p>If any property is left <code>undefined</code>, the browser&#39;s default value will be used instead.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">trak</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s1">'category'</span><span class="p">,</span> <span class="s1">'action'</span><span class="p">);</span>
<span class="nx">trak</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s1">'category'</span><span class="p">,</span> <span class="s1">'action'</span><span class="p">,</span> <span class="s1">'label'</span><span class="p">);</span>
<span class="nx">trak</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s1">'category'</span><span class="p">,</span> <span class="s1">'action'</span><span class="p">,</span> <span class="s1">'label'</span><span class="p">,</span> <span class="nx">extendedOptions</span><span class="p">);</span>
</code></pre></div>
<h5>Example:</h5>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">trak</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s1">'engagement'</span><span class="p">,</span> <span class="s1">'signpost'</span><span class="p">,</span> <span class="s1">'page.href'</span><span class="p">);</span>
<span class="nx">trak</span><span class="p">.</span><span class="nx">event</span><span class="p">(</span><span class="s1">'engagement'</span><span class="p">,</span> <span class="s1">'signpost'</span><span class="p">,</span> <span class="s1">'page.href'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">value</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="na">nonInteraction</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">eventName</span><span class="p">:</span> <span class="s1">'This is a Google Tag Manager event name'</span>
<span class="p">});</span>
</code></pre></div>
<h3>Data-* attr implementation:</h3>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">data-trak=</span><span class="s">'{"category":"Rating","action":"Comparison notepad","label":"Up"}'</span><span class="nt">&gt;</span>link<span class="nt">&lt;/a&gt;</span>

<span class="c">&lt;!-- With an extended option --&gt;</span>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#pagehref"</span> <span class="na">title=</span><span class="s">"1 title"</span> <span class="na">data-trak=</span><span class="s">'{"category":"Test category","action":"Test action","label":"Test label","options":{"eventName":"Event name test"}}'</span><span class="nt">&gt;</span>Data attr test #1<span class="nt">&lt;/a&gt;</span>
</code></pre></div>
<h2>Extended options</h2>

<p>These can be used</p>

<h4>data-trak wildcards:</h4>

<p>Wildcards can be used to specify certain options like the page title or url.</p>

<h5>page.href: Uses <code>window.location.href</code></h5>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">data-trak=</span><span class="s">'{"category":"Rating","action":"page.href","label":"Up"}'</span><span class="nt">&gt;</span>link<span class="nt">&lt;/a&gt;</span>
</code></pre></div>
<h5>page.title: Uses <code>document.title</code></h5>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">data-trak=</span><span class="s">'{"category":"Rating","action":"page.title","label":"Up"}'</span><span class="nt">&gt;</span>link<span class="nt">&lt;/a&gt;</span>
</code></pre></div>
<h5>link.href: Uses <code>this.href</code></h5>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">data-trak=</span><span class="s">'{"category":"Rating","action":"link.href","label":"Up"}'</span><span class="nt">&gt;</span>link<span class="nt">&lt;/a&gt;</span>
</code></pre></div>
<h5>link.title: Uses <code>this.title</code></h5>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">data-trak=</span><span class="s">'{"category":"Rating","action":"link.title","label":"Up"}'</span><span class="nt">&gt;</span>link<span class="nt">&lt;/a&gt;</span>
</code></pre></div>
<h5>referrer: Uses <code>document.referrer</code></h5>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">data-trak=</span><span class="s">'{"category":"Rating","action":"document.referrer","label":"Up"}'</span><span class="nt">&gt;</span>link<span class="nt">&lt;/a&gt;</span>
</code></pre></div>
<hr>

<h3>Options</h3>

<p>Various default <strong>trak.js</strong> options can be overridden:</p>

<h4>trak.options.clean</h4>

<p>Type: <code>boolean</code>
Default: <code>true</code></p>

<p>Choose whether you&#39;d like to clean the provided category, action and labels</p>

<h4>trak.options.delimeter</h4>

<p>Type: <code>string</code>
Default: <code>_</code></p>

<p><strong>trak.js</strong> includes a cleaning method to normalise the arguments that are passed to it. Spaces are converted to an underscore by default but can be overridden by reassigning this value.</p>

<h4>trak.options.trackType</h4>

<p>Type: <code>string</code>
Default: <code>ga</code>
Alternatives:
* <code>ga</code> : Google Analytics (Universal
* <code>_gaq</code> : Google Analytics (ga.js) Old version
* <code>gtm</code> : Google Tag Manager</p>

<p>Use this to change your default tracking provider.</p>

<h4>trak.options.additionalTypes</h4>

<p>Type: <code>function</code>
Default: <code>undefined</code></p>

<p>Add any other event tracking providers. See below for example:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">trak</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">additionalTypes</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">UDM</span><span class="p">.</span><span class="nx">evq</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s1">'trackEvent'</span><span class="p">,</span> <span class="nx">trak</span><span class="p">.</span><span class="nx">clean</span><span class="p">(</span><span class="nx">category</span><span class="p">),</span> <span class="nx">trak</span><span class="p">.</span><span class="nx">clean</span><span class="p">(</span><span class="nx">action</span><span class="p">)]);</span> <span class="c1">// trak.clean(label)
</span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Fire additional event'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h4>trak.options.debug</h4>

<p>Type: <code>boolean</code>
Default: <code>false</code></p>

<p>Show debug logs in the js console</p>

<hr>

<h2>Which tracking API&#39;s are used?</h2>

<p>The default implementation uses latest version of Google Analytics (<code>ga.js</code>) but <strong>trak.js</strong> also supports the older <code>_gaq</code> type or Google Tag Manager.</p>

<hr>

<h2>Browser Compatibility</h2>

<p>trak.js has been tested in the following browsers:
- Chrome
- Firefox 3+
- Opera 10+
- Internet Explorer 8+</p>

	</div>


	<div class="entry-meta entry-meta--post">
		<div class="entry-date">Maintained by</div>
		<p class="entry-maintainers l-list--floated unstyled">

				
					
						
							
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
						
					
					<div class="media entry-author">
			<img src="/img/authors/zmartineau.jpg" alt="Picture of Zander Martineau" class="media-img entry-author-img">
			<div class="media-body">
				<h3 class="entry-author-name"><a href="http://twitter.com/mrmartineau">Zander Martineau</a></h3>
				<p class="entry-author-desc">Zander is a Creative Technologist at TMW. Maintainer of Kickoff and sometimes confused with Harry Potter.</p>
			</div>
		</div>
				
			</p>

	</div>

	

	<!--  -->
</article>

<!-- Pagination links -->
<div class="pagination clearfix">
	<div class="container">
		
		
	</div>
</div>
</div>

	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-27779119-7', 'tmw.co.uk');
		ga('send', 'pageview');
	</script>
</body>
</html>